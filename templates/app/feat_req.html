<form>
    <nav class="sheet-tabs tabs" data-group="primary-tabs">
        <a class="item" data-tab="abilities">Abilities</a>
        <a class="item" data-tab='skills'>Skills</a>
        <a class='item' data-tab='feats'>Features</a>
    </nav>
    <hr>
    <section class="sheet-body">
        <div class="tab" data-tab="abilities" data-group="primary-tabs">
            <ol class="items-list">
                <li class="item flexrow items-header">
                    <div>Name</div>
                    <div>Value</div>
                </li>
                {{#each abilities as |ability key|}}
                    <li class="item flexrow align-center">
                        <div>{{ability.label}}</div>
                        <input type="number" name="abilities.{{key}}.value" value="{{ability.value}}" />
                    </li>
                {{/each}}
            </ol>
        </div>
        <div class="tab" data-tab="skills" data-group="primary-tabs">
            <ol class="items-list">
                <li class="item flexrow items-header">
                    <div>Name</div>
                    <div>level</div>
                </li>
                {{#each skills as |skill key|}}
                    {{#if skill}}
                        <li class="item flexrow align-center">
                            <div>{{skill.label}}</div>
                            <select name='skills.{{key}}.prof'>{{#select skill.prof}}
                                    {{#each ../config.prof as |name sch|}}
                                        <option value="{{numberFormat sch decimals=0 sign=false}}">{{localize name}}</option>
                                    {{/each}}
                                {{/select}}
                            </select>
                        </li>
                    {{/if}}
                {{/each}}
            </ol>
        </div>
        <div class="tab" data-tab="feats" data-group="primary-tabs">
            <ol class="items-list">
                <li class="item flexrow items-header">
                    <div>Name</div>
                    <div>Level</div>
                    <div class="item-controls">
                        <a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add Feature</a>
                    </div>
                </li>
                {{log feats.current.length}}
                {{#if (lt feats.current.length 1)}}
                <input hidden name="feats.current"/>
                {{/if}}
                {{#each feats.current as |feat key|}}
                    <li class="item flexrow align-center">
                        <select name='feats.current.{{key}}.name'>{{#select feat.name}}
                                {{#each ../feats.awail as |feat sch|}}
                                    <option value="{{feat.name}}">{{feat.name}}</option>
                                {{/each}}
                            {{/select}}
                        </select>
                        <input hidden name="feats.current.{{key}}.maxLevel" type="number" value="{{feat.maxLevel}}"/>
                        {{#if (gt feat.maxLevel 1)}}
                            <input type="number" name="feats.current.{{key}}.level" value="{{feat.Level}}" min="0" max="{{feat.maxLevel}}" />
                        {{else}}
                            <div>-</div>
                        {{/if}}
                        <div class="item-controls">
                            <a class="item-control item-delete" data-key="{{key}}" title="Delete Item"><i class="fas fa-trash"></i></a>
                        </div>
                    </li>
                {{/each}}
            </ol>
        </div>
    </section>
    <hr>
    <footer>
        <button type="submit" name="submit" value="1">
            <i class="far fa-save"></i> Submit
        </button>
    </footer>
</form>
